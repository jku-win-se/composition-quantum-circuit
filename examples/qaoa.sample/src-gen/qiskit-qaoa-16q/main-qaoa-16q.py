from qiskit import QuantumCircuit, ClassicalRegister, QuantumRegister
from qiskit.circuit import Gate
import numpy as np

#Import Library
import Composite_Gates
import Loop_Operations
import Measurements
import Elementary_Gates


#Create empty Quantum Circuit
qr = QuantumRegister(16)
cr = ClassicalRegister(16)
QAOA = QuantumCircuit(qr,cr)

#Create objects for quantum operations
e_gate=Elementary_Gates.ElementaryGate()
c_gate=Composite_Gates.CompositeGate()
l_gate=Loop_Operations.LoopOperation()
m_gate=Measurements.MeasurementGate()

# Layer L1
target_qubits = [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]
QAOA.append(e_gate.hadamard(size=len(target_qubits), control_qubits=None, inverse=False), target_qubits)

# Layer L2
target_qubits = [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]
loop_tqubits = [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]
loop_cqubits = None
overall_control_qubits = None
QAOA.append(l_gate.simple_loop(2, gates=[(c_gate.cost_unitary, [], dict(w=[[6.882348852315307, 7.609646472859897, 4.470628191860506, 7.9767279558157425, 9.4545839560831, 7.463187681558306, 2.4059121508206003, 8.509735376910786, 9.241621116102195, 5.381123436555089, 5.771830779823588, 8.171019527510348, 3.4042636630158984, 0.3303039109427619, 3.2075415377809016, 8.34906755557416, ], [3.0244528867664, 0.5456843635802255, 3.380468050175074, 1.133600207040386, 1.936730178078333, 6.248287955495164, 0.2315314601089724, 4.7298439751782855, 7.637190703310544, 8.883792616763897, 5.683768364484295, 8.803002487135899, 6.1769748202603045, 9.15255514567673, 1.530952402909368, ], [4.528625514107407, 8.269606163669534, 9.939774906502834, 0.2013471949541512, 6.868711101529712, 6.976250308805149, 4.40489469767496, 4.8827359017111664, 4.650015050860539, 8.28023471253063, 3.9522192602929174, 3.098386491448898, 7.390191583510985, 4.621935508462962, ], [5.580131097724843, 4.239634184422771, 6.4990171448840774, 8.037404315478284, 3.194165253154586, 0.7892652264318567, 2.4760993245866283, 3.928868970247612, 2.869605951026518, 5.010916182146325, 9.033111697156777, 8.692514939125752, 7.762144592050629, ], [7.733208938575351, 9.687730774687628, 4.438713472584574, 4.3905448889889644, 3.523359180072767, 2.308100195852459, 1.8621305392064313, 8.353137933251077, 7.023516596314857, 2.330781144819176, 7.953917679291598, 4.19036939741059, ], [8.51410212245406, 5.931790193204557, 8.695448276083052, 1.0685089314696061, 2.8719311864993715, 0.2994707751322556, 8.13283242541354, 3.235018978890155, 5.006922450576802, 9.33957773648497, 4.303705095025766, ], [1.7839789410346218, 6.589711231822914, 9.637101027542714, 9.37254960999854, 2.170342543503435, 3.4234964527634606, 3.3059933247155007, 6.028086465223032, 0.12470284637872364, 0.16697254791557037, ], [1.4771040265438606, 4.706019642214954, 7.145626154672594, 9.281208954133188, 4.60627074149537, 6.522697638393783, 5.584511155743285, 4.051856028168697, 3.5286476288792343, ], [4.9400177295761685, 2.488314310630125, 1.3290731447122983, 8.242004559080442, 5.1291608053544575, 0.828379356922534, 8.231089202550764, 9.770859424180953, ], [3.7605139860972816, 6.518992856979821, 8.473322573830266, 4.144955142557026, 3.51940186417064, 9.717186912228978, 8.21350056223812, ], [6.5197298806415995, 6.032015190459146, 9.295690487239202, 8.344239015117758, 7.773067172763348, 4.083186974497242, ], [0.09382964821941453, 0.01805119256749088, 5.5317607475050075, 9.017438014881158, 3.5765658092787813, ], [2.8557783045483696, 6.5127610383421555, 2.036972835254396, 3.8697460547182216, ], [0.7679447177912468, 7.30841666777557, 8.745077605970573, ], [2.7900404363154694, 8.60955599319544, ], [6.30156304107175, ], ])), (c_gate.mixer_unitary, [], dict(size=QAOA.num_qubits))], target_qubits=loop_tqubits, control_qubits=loop_cqubits, overall_control_qubits=overall_control_qubits, inverse=False), target_qubits)

# Layer L3
target_qubits = [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]
cbits = [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]
QAOA.append(m_gate.measurement(target_qubits, cbits), target_qubits, cbits)
